<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();

    // Title centered
    doc.setFontSize(14);
    doc.setFont("helvetica", "bold");
    const title = "Annexure - Water Demand Calculations for Conveyor MVWS System";
    const pageWidth = doc.internal.pageSize.getWidth();
    const titleWidth = doc.getTextWidth(title);
    doc.text(title, (pageWidth - titleWidth) / 2, 20);

    // Table of values
    doc.setFontSize(11);
    doc.setFont("helvetica", "normal");

    let y = 40;
    const inputs = document.querySelectorAll("table input");
    const labels = document.querySelectorAll("table th");

    inputs.forEach((input, i) => {
        if (input.value.trim() !== "") {
            let label = labels[i].innerText;
            let value = input.value;
            doc.text(`${label}: ${value}`, 20, y);
            y += 10;
        }
    });

    // Footer with current date (bottom right)
    const today = new Date();
    const dateStr = today.toLocaleDateString();
    const pageHeight = doc.internal.pageSize.getHeight();
    const dateWidth = doc.getTextWidth(dateStr);
    doc.text(dateStr, pageWidth - dateWidth - 20, pageHeight - 10);

    doc.save("Conveyor_MVWS_Calculations.pdf");
}
</script>
